<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Dola Restaurant</title>
    <!-- Bootstrap CSS -->
    <link
      crossorigin="anonymous"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      rel="stylesheet"
    />
    <!-- Font Awesome CSS -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
      rel="stylesheet"
    />
    <!-- Choices.js CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css"
    />
    <style>
      body {
        background-color: #f8f9fa;
      }
      .container {
        margin-top: 20px;
      }
      .order-summary {
        background-color: #fff;
        padding: 20px;
        border-radius: 5px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        /* Remove position: sticky to prevent overlapping issues */
        position: relative;
        /* z-index adjusted to prevent overlapping */
        z-index: 1;
      }
      .order-summary img {
        width: 50px;
        height: 50px;
        border-radius: 5px;
      }
      .order-summary .btn {
        width: 100%;
      }
      .order-summary .total {
        font-size: 1.5rem;
        font-weight: bold;
      }
      .order-summary .back-to-cart {
        text-decoration: none;
        color: #007bff;
      }
      .order-summary .back-to-cart:hover {
        text-decoration: underline;
      }
      /* Wrapper to position the flag */
      .country-code-wrapper {
        position: relative;
        display: flex;
        align-items: center;
      }
      /* Style the select element */
      #country-code {
        appearance: none; /* Remove default dropdown arrow */
        -webkit-appearance: none;
        -moz-appearance: none;
        background-repeat: no-repeat;
        background-position: left 10px center;
        background-size: 25px 20px;
        padding-left: 40px; /* Space for the flag */
        padding-right: 40px; /* Space for the custom arrow */
        width: 100%;
        height: 38px;
        border: 1px solid #ced4da;
        border-radius: 0.25rem;
        background-color: #fff;
        background-image: url("img/co_vn.png"); /* Default: Vietnam flag */
        background-repeat: no-repeat;
        background-position: left 10px center;
        position: relative;
        z-index: 1;
      }
      /* Custom dropdown arrow */
      .country-code-wrapper::after {
        content: "\f078"; /* Font Awesome chevron-down */
        font-family: "Font Awesome 5 Free";
        font-weight: 900;
        position: absolute;
        right: 15px;
        pointer-events: none;
        color: #6c757d;
        z-index: 2;
      }
      /* Hide the native arrow in some browsers */
      select::-ms-expand {
        display: none;
      }
      /* Ensure the dropdown is above other elements */
      .choices__inner {
        position: relative;
        z-index: 2;
      }
      /* Adjust order-summary to prevent overlapping on small screens */
      @media (max-width: 767.98px) {
        .order-summary {
          position: static;
          margin-top: 20px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="row">
        <!-- Form Section -->
        <div class="col-md-7">
          <h2 class="text-primary">Dola Restaurant</h2>
          <form>
            <h4>Thông tin nhận hàng</h4>
            <!-- Email -->
            <div class="mb-3">
              <label class="form-label" for="email">Email</label>
              <input
                class="form-control"
                id="email"
                type="email"
                placeholder="Email"
                required
              />
            </div>
            <!-- Họ và tên -->
            <div class="mb-3">
              <label class="form-label" for="name">Họ và tên</label>
              <input
                class="form-control"
                id="name"
                type="text"
                placeholder="Họ và tên"
                required
              />
            </div>
            <!-- Số điện thoại -->
            <div class="mb-3">
              <label class="form-label" for="phone">Số điện thoại (tùy chọn)</label>
              <div class="input-group">
                <div class="country-code-wrapper me-2" style="flex: 0 0 180px;">
                  <select class="form-select" id="country-code">
                    <option value="+84" data-image="img/co_vn.png">Việt Nam (+84)</option>
                    <option value="+1" data-image="img/co_usa.png">USA (+1)</option>
                    <option value="+81" data-image="img/co_japan.jpg">Japan (+81)</option>
                    <!-- Thêm các quốc gia khác nếu cần -->
                  </select>
                </div>
                <input
                  class="form-control"
                  id="phone"
                  type="text"
                  placeholder="Số điện thoại"
                />
              </div>
            </div>
            <!-- Địa chỉ -->
            <div class="mb-3">
              <label class="form-label" for="address">Địa chỉ (tùy chọn)</label>
              <input
                class="form-control"
                id="address"
                type="text"
                placeholder="Địa chỉ"
              />
            </div>
            <!-- Tỉnh thành -->
            <div class="mb-3">
              <label class="form-label" for="city">Tỉnh thành</label>
              <select class="form-select" id="city">
                <option value="">---</option>
              </select>
            </div>
            <!-- Quận huyện -->
            <div class="mb-3">
              <label class="form-label" for="district">Quận huyện (tùy chọn)</label>
              <select class="form-select" id="district">
                <option value="">---</option>
                <!-- Populate with district options -->
              </select>
            </div>
            <!-- Phường xã -->
            <div class="mb-3">
              <label class="form-label" for="ward">Phường xã (tùy chọn)</label>
              <select class="form-select" id="ward">
                <option value="">---</option>
                <!-- Populate with ward options -->
              </select>
            </div>
            <!-- Ghi chú -->
            <div class="mb-3">
              <label class="form-label" for="note">Ghi chú (tùy chọn)</label>
              <textarea
                class="form-control"
                id="note"
                rows="3"
                placeholder="Ghi chú"
              ></textarea>
            </div>
          </form>
        </div>
        <!-- Order Summary Section -->
        <div class="col-md-5">
          <div class="order-summary">
            <h4>Vận chuyển</h4>
            <div class="alert alert-info">
              Vui lòng nhập thông tin giao hàng
            </div>
            <h4>Thanh toán</h4>
            <div class="form-check">
              <input
                class="form-check-input"
                id="cod"
                name="payment"
                type="radio"
                checked
              />
              <label class="form-check-label" for="cod">
                Thanh toán khi giao hàng (COD)
              </label>
              <i class="fas fa-money-bill-wave ms-2"></i>
            </div>
            <h4 class="mt-4">Đơn hàng (1 sản phẩm)</h4>
            <div class="d-flex align-items-center mb-3">
              <img
                alt="Com suon nuong"
                height="50"
                src="https://storage.googleapis.com/a1aa/image/8UcAPcHeBdVIDCgxKuw28qmZBB0yS9P2BFMXXWoxhwhRIoAKA.jpg"
                width="50"
              />
              <div class="ms-3">
                <p class="mb-0">Cơm sườn nướng</p>
                <p class="mb-0">65.000₫</p>
              </div>
            </div>
            <div class="mb-3">
              <label class="form-label" for="discount-code">Nhập mã giảm giá</label>
              <div class="input-group">
                <input
                  class="form-control"
                  id="discount-code"
                  type="text"
                  placeholder="Nhập mã giảm giá"
                />
                <button class="btn btn-primary">Áp dụng</button>
              </div>
            </div>
            <div class="mb-3">
              <p class="mb-0">Tạm tính</p>
              <p class="mb-0">65.000₫</p>
            </div>
            <div class="mb-3">
              <p class="mb-0">Phí vận chuyển</p>
              <p class="mb-0">-</p>
            </div>
            <div class="mb-3 total">
              <p class="mb-0">Tổng cộng</p>
              <p class="mb-0">65.000₫</p>
            </div>
            <a class="back-to-cart" href="#">Quay về giỏ hàng</a>
            <button class="btn btn-primary mt-3">ĐẶT HÀNG</button>
          </div>
        </div>
      </div>
    </div>
    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Choices.js JS -->
    <script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const countryCodeSelect = document.getElementById("country-code");
        const citySelect = document.getElementById("city");

        // Danh sách các tỉnh thành của Việt Nam
        const vietnamProvinces = [
          "An Giang", "Bà Rịa - Vũng Tàu", "Bắc Giang", "Bắc Kạn", "Bạc Liêu", "Bắc Ninh", "Bến Tre", "Bình Định",
          "Bình Dương", "Bình Phước", "Bình Thuận", "Cà Mau", "Cao Bằng", "Đắk Lắk", "Đắk Nông", "Điện Biên",
          "Đồng Nai", "Đồng Tháp", "Gia Lai", "Hà Giang", "Hà Nam", "Hà Nội", "Hà Tĩnh", "Hải Dương", "Hải Phòng",
          "Hậu Giang", "Hòa Bình", "Hưng Yên", "Khánh Hòa", "Kiên Giang", "Kon Tum", "Lai Châu", "Lâm Đồng",
          "Lạng Sơn", "Lào Cai", "Long An", "Nam Định", "Nghệ An", "Ninh Bình", "Ninh Thuận", "Phú Thọ", "Phú Yên",
          "Quảng Bình", "Quảng Nam", "Quảng Ngãi", "Quảng Ninh", "Quảng Trị", "Sóc Trăng", "Sơn La", "Tây Ninh",
          "Thái Bình", "Thái Nguyên", "Thanh Hóa", "Thừa Thiên Huế", "Tiền Giang", "Trà Vinh", "Tuyên Quang",
          "Vĩnh Long", "Vĩnh Phúc", "Yên Bái"
        ];

        // Khởi tạo Choices.js cho các select
        const countryChoices = new Choices(countryCodeSelect, {
          searchEnabled: false,
          shouldSort: false,
          itemSelectText: '',
        });

        const cityChoices = new Choices(citySelect, {
          searchEnabled: false,
          shouldSort: false,
          itemSelectText: '',
        });

        // Hàm cập nhật hình cờ dựa trên lựa chọn
        const updateFlag = () => {
          const selectedOption = countryCodeSelect.options[countryCodeSelect.selectedIndex];
          const flagUrl = selectedOption.getAttribute("data-image");
          console.log("Selected country code:", countryCodeSelect.value, "Flag URL:", flagUrl);
          countryCodeSelect.style.backgroundImage = `url(${flagUrl})`;
        };

        // Cập nhật hình cờ khi thay đổi lựa chọn
        countryCodeSelect.addEventListener("change", () => {
          updateFlag();
          console.log("Country code changed to:", countryCodeSelect.value);

          // Kiểm tra giá trị của mã quốc gia
          if (countryCodeSelect.value === "+84") { 
            // Xóa các lựa chọn hiện tại
            cityChoices.clearChoices();
            // Thêm các tỉnh thành của Việt Nam
            cityChoices.setChoices(
              vietnamProvinces.map(province => ({
                value: province,
                label: province,
              })),
              'value',
              'label',
              true
            );
          } else {
            // Nếu không phải Việt Nam, reset lại dropdown
            cityChoices.clearChoices();
            cityChoices.setChoices([
              { value: '', label: '---' }
            ], 'value', 'label', true);
          }
          console.log("City select options updated.");
        });

        // Cập nhật hình cờ khi trang được tải
        updateFlag();
      });
    </script>
  </body>
</html>
